<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cart - Tindi Tech</title>
  <link rel="stylesheet" href="assets/css/style.css">
  <style>
    /* Styles moved to css pracs.css */
    /* Minimal override used only if necessary */
    body {
      background: #f4f6f8;
    }

    .container-cart-all {
      max-width: 900px;
      margin: 40px auto;
      padding: 0 20px;
    }
  </style>
  <script src="assets/js/site-api.js"></script>
</head>
<header>
  <div class="logo">
    <a href="Home.html"> <img src=assets/img/logo.png alt="Tindi Tech" /></a>
  </div>
  <nav id="navbar">
    <a href="Home.html">Home</a>
    <a href="Shop.html">Shop</a>
    <a href="About.html">About</a>
    <a href="Contact.html">Contact</a>
    <a href="Services.html">Services</a>
    <a href="login.html" class="nav-login-link">Login/Register</a>
  </nav>
  <div class="nav-icons">
    <a href="My%20Orders.html" style="margin-right: 15px; font-weight: 600;">My Orders</a>

    <a href="cart.html" style="position: relative;">
      <img src="assets/img/pics/cart.jpg" class="nav-icon" alt="Cart">
      <span id="cart-count" class="cart-count-badge">0</span>
    </a>
  </div>
</header>

<body>
  <div class="container-cart-all">
    <div class="cart-container">
      <h1>Your Shopping Cart</h1>
      <!-- Cart Items Container -->
      <div id="cartItems"></div>
      <!-- Cart Summary -->
      <div class="cart-summary">
        <h2>Cart Summary</h2>
        <p style="font-size: 1.2em;">Total: <span id="cartTotal" class="text-primary-dark text-bold">0</span> KES
        </p>
        <button id="checkoutBtn" class="btn btn-primary">Proceed to Checkout</button>
      </div>
    </div>
  </div>
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-column">
          <h3>Tindi Tech</h3>
          <p style="color: #ccc;">Providing innovative networking solutions,<br>
            IT solutions and services to businesses worldwide.</p>
        </div>

        <div class="footer-column">
          <h3>Quick Links</h3>
          <a href="Home.html">Home</a>
          <a href="Shop.html">Shop</a>
          <a href="About.html">About</a>
          <a href="Contact.html">Contact</a>
          <a href="Services.html">Services</a>
          <a href="quote.html">Quote</a>
        </div>

        <div class="footer-column">
          <h3>Contact Us</h3>
          <p style="color: #ccc;">00100, NAIROBI</p>
          <p style="color: #ccc;">Email: tinditechnologies@gmail.com</p>
          <p style="color: #ccc;">Phone: (01)10 725 884</p>
        </div>

        <div class="footer-column">
          <h3>Follow Us</h3>
          <div class="social-links">
            <a href="https://x.com/WizzyAdams4" target="_blank"> <img src="assets/img/x%20image.png" alt="X"></a>
            <a href="https://www.facebook.com/profile.php?id=100078814762212" target="_blank"><img
                src="assets/img/facebook.jpeg" alt="FB"></a>
            <a href="https://www.whatsapp.com/?lang=en" target="_blank"><img src="assets/img/whatsapp.jpeg" alt="WA">
            </a>
            <a href="https://www.tiktok.com/@njenga_05?lang=en" target="_blank"><img src="assets/img/tiktok.png"
                alt="TikTok"></a>
          </div>
        </div>
      </div>

      <div class="copyright">
        &copy; 2025 Tindi Tech. All Rights Reserved.
      </div>
    </div>
  </footer>
  <script>
    // Use the professional CartManager from site-api.js
    const cartManager = window.cartManager;

    // Load cart when page opens
    window.onload = function () {
      displayCart();
    };

    // Display cart items
    function displayCart() {
      const container = document.getElementById("cartItems");
      const totalEl = document.getElementById("cartTotal");
      container.innerHTML = "";

      const cartItems = cartManager.cart;

      if (!cartItems || cartItems.length === 0) {
        container.innerHTML = "<p class='empty-cart'>Your cart is empty. Looks like you have not added anything in the cart yet.</p>";
        totalEl.textContent = "0";
        return;
      }

      cartItems.forEach((item, index) => {
        const itemTotal = item.price * item.quantity;
        const imgSrc = item.image || 'img/pics/default-product.png';

        container.innerHTML += `
            <div class="cart-item">
                <img src="${imgSrc}" class="cart-img" alt="${item.name}">
                <div class="cart-info">
                    <h3>${item.name}</h3>
                    <p>Price: ${item.price.toLocaleString()} KES</p>
                    <p>Subtotal: ${itemTotal.toLocaleString()} KES</p>
                    <div class="qty-box">
                        <button onclick="updateQty(${index}, -1)">-</button>
                        <span>${item.quantity}</span>
                        <button onclick="updateQty(${index}, 1)">+</button>
                    </div>
                </div>
                <button class="remove-btn" onclick="deleteItem(${index})">Remove</button>
            </div>
        `;
      });
      totalEl.textContent = cartManager.getTotal().toLocaleString();
    }

    // Change quantity
    function updateQty(index, amount) {
      const item = cartManager.cart[index];
      if (item) {
        const newQty = item.quantity + amount;
        if (cartManager.updateQuantity(index, newQty)) {
          displayCart();
        }
      }
    }

    // Remove item
    async function deleteItem(index) {
      if (await window.secureConfirm("Remove this item from your cart?", "Remove", true)) {
        if (cartManager.removeItem(index)) {
          displayCart();
        }
      }
    }

    // Checkout button
    const checkoutBtn = document.getElementById("checkoutBtn");
    if (checkoutBtn) {
      checkoutBtn.onclick = () => {
        if (cartManager.cart.length === 0) {
          showToast("Your cart is empty!", 'info');
        } else {
          window.location.href = "checkout.html";
        }
      }
    }
  </script>
  <script src="assets/js/auth.js"></script>
</body>

</html>